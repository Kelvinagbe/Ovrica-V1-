const C=require('./0x744.json');class F{constructor(o,h){this.o=o;this.h=h;this.l=C.x2b;this.p=C.x3c}async g(n){const c=this.h.g(n,this.p);if(c){console.log(`${C.x4e} Config '${n}' cached`);return c}try{const d=await this.o.v(),l=d.collection(this.l),r=await l.findOne({name:n});if(r&&r.value!==undefined){this.h.s(n,r.value,this.p);return r.value}return null}catch(e){console.error(`${C.x4c} Get config '${n}':`,e.message);throw e}}async s(n,v){try{const d=await this.o.v(),l=d.collection(this.l);await l.updateOne({name:n},{$set:{name:n,value:v,updatedAt:new Date()}},{upsert:!0});this.h.s(n,v,this.p);console.log(`${C.x4a} Config '${n}' stored`);return!0}catch(e){console.error(`${C.x4c} Set config '${n}':`,e.message);throw e}}async d(n){try{const d=await this.o.v(),l=d.collection(this.l),r=await l.deleteOne({name:n});if(r.deletedCount>0){this.h.d(n,this.p);console.log(`${C.x4a} Config '${n}' deleted`);return!0}return!1}catch(e){console.error(`${C.x4c} Delete config '${n}':`,e.message);throw e}}async l(){try{const d=await this.o.v(),l=d.collection(this.l);return await l.find({}).toArray()}catch(e){console.error(`${C.x4c} List configs:`,e.message);throw e}}}module.exports=F;